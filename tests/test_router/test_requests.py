from fastapi.testclient import TestClient
from app.main import app
from app.routes.requests import *

# TOKEN = "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiIsIng1dCI6Ii1LSTNROW5OUjdiUm9meG1lWm9YcWJIWkdldyIsImtpZCI6IjY1OTg4MGM1YWY5Y2Y1Y2M3MjkxNGYyMjUzM2VlY2U1In0.eyJhdWQiOiJhcGk6Ly9lOWM4MWQ1Ni1mYzUwLTQ0YTEtODczOS1hNTY5YTlhNmUxM2EiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8xZDJhY2FlMS0xYTA0LTQ5OTUtOTVmNS05N2MzOGIwYzAyMTMvIiwiaWF0IjoxNjg0NTgxMDA2LCJuYmYiOjE2ODQ1ODEwMDYsImV4cCI6MTY4NDU4NTQzMCwiYWNyIjoiMSIsImFpbyI6IkFhUUFXLzhUQUFBQU5wMFBLWS9zd2FoWEVNQ2J6UjUzRzlYV09wNDc5Um9UM2FqSU8vYWowbUN5UXZLbzdBMCtva2dpZUpxRk1MTXZHNmtKeExzOFNZZ1U4SXM0Qm1Ba0w2c1NBQjNSZytOekxMdm5uaU1QNVJFRmliSVBIbU93SXFoL054dDFxbWJJRVExTkJHRU1hS0FVWmhMVUJQdTZnOExDbWF1VmpaVVV6bGpaUGo0QTdueVdQSHdOTk9IaE1OUGJBRGtUajRudEJndmlyRzJGUFdiZDlDOVg4NHhlQWc9PSIsImFtciI6WyJwd2QiLCJtZmEiXSwiYXBwaWQiOiJlOWM4MWQ1Ni1mYzUwLTQ0YTEtODczOS1hNTY5YTlhNmUxM2EiLCJhcHBpZGFjciI6IjEiLCJlbWFpbCI6ImR1bW15X3VzZXJAaG90bWFpbC5jb20iLCJmYW1pbHlfbmFtZSI6IkR1bW15IiwiZ2l2ZW5fbmFtZSI6IlVzZXIiLCJpZHAiOiJsaXZlLmNvbSIsImlwYWRkciI6IjI0LjEzMi4yMzguNCIsIm5hbWUiOiJEdW1teSBVc2VyIiwib2lkIjoiY2FmN2ZhMmMtYTJjYS00Y2VmLTg0YWMtMjAyMGMzZmNlMGExIiwicmgiOiIwLkFYd0FDSlZzeFluXzBFeVY5S28teF9zRmItV0hJclZRaHQxRHQyQkppQkJ4RUhaOEFFWS4iLCJyb2xlcyI6WyJub3JtYWwtcm9sZSJdLCJzY3AiOiJkdW1teV9zY29wZSIsInN1YiI6ImlTNy0xcHVJUWs0RFFIRTNlZk5KNUxVdjc2MF9ydmZGdkRMTUZWUkZZQ0UiLCJ0aWQiOiJjNTZjOTUwOC1mZjg5LTRjZDAtOTVmNC1hYTNlYzdmYjA1NmYiLCJ1bmlxdWVfbmFtZSI6ImR1bW15X3VzZXJAaG90bWFpbC5jb20iLCJ1dGkiOiJEVFFSTTN2bDJrMlVjZkFIRlk0TkFBIiwidmVyIjoiMS4wIn0.LaBc1qN2p_Y5lW1qnBQj58Vj_gPWP_vBRJ3PHYFHWRIWIeJH3ZBExmEkBmIVnsoqNXEf39uYxSDRvaPx4yq-Rw"

# client = TestClient(app, cookies={
#     "token": TOKEN
# })
client = TestClient(app)

def test_requests_home(mocker):
    mocker.patch(
        'app.utils.identity.validate_auth',
        return_value = None
    )
    response = client.get("/requests")
    print(response.text)
    assert response.status_code == 200
    # assert response.text == "123"
